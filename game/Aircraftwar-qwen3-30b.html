

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>飞机大战</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
            font-family: 'Arial', sans-serif;
            overflow: hidden;
        }
        #game-container {
            position: relative;
            width: 800px;
            height: 600px;
            border: 3px solid #fff;
            border-radius: 10px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.7);
            overflow: hidden;
        }
        canvas {
            background: #000;
            display: block;
        }
        #score-board {
            position: absolute;
            top: 10px;
            left: 10px;
            color: #fff;
            font-size: 24px;
            text-shadow: 0 0 5px #0ff, 0 0 10px #0ff;
            z-index: 10;
        }
        #game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #ff0000;
            font-size: 48px;
            font-weight: bold;
            text-shadow: 0 0 10px #ff0000;
            display: none;
            z-index: 20;
        }
        #restart-btn {
            position: absolute;
            top: 60%;
            left: 50%;
            transform: translateX(-50%);
            padding: 12px 24px;
            background: #ff0000;
            color: white;
            border: none;
            border-radius: 30px;
            font-size: 20px;
            cursor: pointer;
            display: none;
            box-shadow: 0 0 15px #ff0000;
            transition: all 0.3s;
        }
        #restart-btn:hover {
            background: #ff4444;
            transform: translateX(-50%) scale(1.05);
        }
        #instructions {
            position: absolute;
            bottom: 10px;
            left: 10px;
            color: #fff;
            font-size: 14px;
            text-align: center;
            width: 100%;
            z-index: 10;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <canvas id="game-canvas" width="800" height="600"></canvas>
        <div id="score-board">得分: 0</div>
        <div id="game-over">游戏结束</div>
        <button id="restart-btn">重新开始</button>
        <div id="instructions">
            方向键移动 | 空格键发射 | 得分: 10点/敌机
        </div>
    </div>

    <script>
        // 游戏核心代码
        document.addEventListener('DOMContentLoaded', () => {
            const canvas = document.getElementById('game-canvas');
            const ctx = canvas.getContext('2d');
            const scoreBoard = document.getElementById('score-board');
            const gameOver = document.getElementById('game-over');
            const restartBtn = document.getElementById('restart-btn');
            
            // 游戏状态
            let gameRunning = true;
            let score = 0;
            let player = {
                x: canvas.width / 2,
                y: canvas.height - 60,
                width: 50,
                height: 40,
                speed: 8,
                color: '#00ff00'
            };
            
            let bullets = [];
            let enemies = [];
            let enemySpawnTimer = 0;
            let lastShotTime = 0;
            const shotCooldown = 300; // 300ms 发射间隔
            
            // 游戏循环
            function gameLoop() {
                if (!gameRunning) return;
                
                // 清空画布
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // 绘制玩家
                ctx.fillStyle = player.color;
                ctx.fillRect(player.x - player.width/2, player.y - player.height/2, player.width, player.height);
                
                // 绘制玩家生命条
                ctx.fillStyle = '#333';
                ctx.fillRect(player.x - player.width/2, player.y - player.height/2 - 10, player.width, 5);
                ctx.fillStyle = '#00ff00';
                ctx.fillRect(player.x - player.width/2, player.y - player.height/2 - 10, player.width * (1 - (enemies.length / 10)), 5);
                
                // 绘制子弹
                bullets.forEach((bullet, index) => {
                    ctx.fillStyle = '#ffffff';
                    ctx.fillRect(bullet.x, bullet.y, 3, 10);
                    bullet.y -= 10;
                    
                    // 移除超出屏幕的子弹
                    if (bullet.y < 0) {
                        bullets.splice(index, 1);
                    }
                });
                
                // 绘制敌人
                enemies.forEach((enemy, index) => {
                    ctx.fillStyle = '#ff0000';
                    ctx.fillRect(enemy.x - 20, enemy.y - 20, 40, 40);
                    
                    // 敌人移动
                    enemy.y += 3;
                    
                    // 检查敌人是否到达底部
                    if (enemy.y > canvas.height) {
                        enemies.splice(index, 1);
                    }
                });
                
                // 生成敌人
                enemySpawnTimer++;
                if (enemySpawnTimer > 60) { // 1秒生成一个
                    const x = Math.random() * (canvas.width - 40) + 20;
                    enemies.push({ x, y: -40 });
                    enemySpawnTimer = 0;
                }
                
                // 碰撞检测
                checkCollisions();
                
                // 更新得分
                scoreBoard.textContent = `得分: ${score}`;
                
                // 继续游戏循环
                requestAnimationFrame(gameLoop);
            }
            
            // 碰撞检测
            function checkCollisions() {
                // 子弹与敌人碰撞
                for (let i = bullets.length - 1; i >= 0; i--) {
                    for (let j = enemies.length - 1; j >= 0; j--) {
                        const bullet = bullets[i];
                        const enemy = enemies[j];
                        
                        const dx = bullet.x - enemy.x;
                        const dy = bullet.y - enemy.y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance < 30) { // 碰撞检测半径
                            bullets.splice(i, 1);
                            enemies.splice(j, 1);
                            score += 10;
                            break;
                        }
                    }
                }
                
                // 玩家与敌人碰撞
                for (let i = enemies.length - 1; i >= 0; i--) {
                    const enemy = enemies[i];
                    const dx = player.x - enemy.x;
                    const dy = player.y - enemy.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < 35) { // 玩家与敌人碰撞
                        gameOver.style.display = 'block';
                        restartBtn.style.display = 'block';
                        gameRunning = false;
                        break;
                    }
                }
            }
            
            // 键盘控制
            const keys = {};
            window.addEventListener('keydown', (e) => {
                keys[e.key] = true;
                
                // 发射子弹
                if (e.key === ' ' && Date.now() - lastShotTime > shotCooldown) {
                    bullets.push({
                        x: player.x,
                        y: player.y - player.height/2
                    });
                    lastShotTime = Date.now();
                }
            });
            
            window.addEventListener('keyup', (e) => {
                keys[e.key] = false;
            });
            
            // 玩家移动
            function movePlayer() {
                if (keys['ArrowLeft'] && player.x > player.width/2) {
                    player.x -= player.speed;
                }
                if (keys['ArrowRight'] && player.x < canvas.width - player.width/2) {
                    player.x += player.speed;
                }
            }
            
            // 重新开始游戏
            restartBtn.addEventListener('click', () => {
                score = 0;
                player.x = canvas.width / 2;
                bullets = [];
                enemies = [];
                gameOver.style.display = 'none';
                restartBtn.style.display = 'none';
                gameRunning = true;
                gameLoop();
            });
            
            // 游戏初始化
            function initGame() {
                // 重置游戏状态
                score = 0;
                player.x = canvas.width / 2;
                bullets = [];
                enemies = [];
                
                // 开始游戏循环
                gameLoop();
            }
            
            // 启动游戏
            initGame();
            
            // 玩家移动循环
            setInterval(() => {
                if (gameRunning) {
                    movePlayer();
                }
            }, 16); // ~60fps
        });
    </script>
</body>

</html>
